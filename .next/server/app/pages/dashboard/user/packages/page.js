(()=>{var e={};e.id=885,e.ids=[885],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},9674:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>g,tree:()=>l}),a(3822),a(6960),a(2029),a(5866);var r=a(3191),s=a(8716),i=a(7922),o=a.n(i),d=a(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);a.d(t,n);let l=["",{children:["pages",{children:["dashboard",{children:["user",{children:["packages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3822)),"D:\\node test\\frontend-nextjs\\src\\app\\pages\\dashboard\\user\\packages\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6960)),"D:\\node test\\frontend-nextjs\\src\\app\\pages\\dashboard\\layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"D:\\node test\\frontend-nextjs\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\node test\\frontend-nextjs\\src\\app\\pages\\dashboard\\user\\packages\\page.tsx"],p="/pages/dashboard/user/packages/page",u={require:a,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/pages/dashboard/user/packages/page",pathname:"/pages/dashboard/user/packages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},2949:(e,t,a)=>{Promise.resolve().then(a.bind(a,2344))},9162:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(326),s=a(8129),i=a(7618);let o=({isShow:e,message:t,bgColor:a})=>r.jsx(s.M,{children:e&&r.jsx(i.E.div,{className:`border border-white/30 rounded fixed top-16 md:left-[25%] left-[5%] h-[calc(7%)] md:w-[calc(50%)] w-[90%] z-50 content-center grid justify-items-center backdrop-blur-xl ${"red"==a?"bg-rose-700/50":"bg-blue-700/50"}`,initial:{opacity:0,y:-300},animate:{opacity:1,y:0},exit:{opacity:0,y:-100},transition:{duration:1},children:r.jsx("p",{className:"md:text-lg text-sm mx-2 font-semibold",children:t})})})},2344:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(326),s=a(9484),i=a(9162),o=a(6418),d=a(4099),n=a(8129),l=a(7618),c=a(5047),p=a(7577);let u=()=>{(0,c.useRouter)();let[e,t]=(0,p.useState)(null),[a,u]=(0,p.useState)(null),[g,h]=(0,p.useState)({isShow:!1,message:"",bgColor:""}),[b,m]=(0,p.useState)(null),[x,k]=(0,p.useState)(!1);(0,p.useEffect)(()=>{(async()=>{if(null!=sessionStorage.getItem("loginId")){let e=await d.Z.get(o.Z.GetDataById+sessionStorage.getItem("loginId"));return u(e.data),e.data}})()},[]),(0,p.useEffect)(()=>{(async()=>{t((await d.Z.get(o.Z.GetAllPackages)).data)})()},[]),(0,p.useEffect)(()=>{(async()=>{m((await d.Z.get(o.Z.GetActivatedPackagesByUserId+sessionStorage.getItem("loginId"))).data)})()},[]),(0,p.useEffect)(()=>{let e=setTimeout(()=>{h({isShow:!1,bgColor:"",message:""})},5e3);return()=>clearInterval(e)},[g.isShow]);let w=async e=>{if(a?.balance>=e.price)try{let t=await d.Z.post(o.Z.CreateActivity,{userId:a.id,packageId:e.packagesId,packageTitle:e.title,packageStatus:"active",remainActive:parseInt(e.duration),remainWatchTime:parseFloat(e.description)});!0!=t.data?h({bgColor:"red",isShow:!0,message:t.data}):(await d.Z.post(`${o.Z.BuyPackage}`,{userId:sessionStorage.getItem("loginId"),packageId:e.packagesId,packagePrice:e.price}),u(t=>({...t,balance:t.balance-e.price})),h({bgColor:"blue",isShow:!0,message:`Success! You've purchased the package. Your new balance is ${a.balance-e.price} BDT.`}))}catch(e){console.error(e),h({bgColor:"red",isShow:!0,message:"Error purchasing the package. Please try again."})}else h({bgColor:"red",isShow:!0,message:`You need more ${parseFloat(e.price)-parseFloat(a.balance)} BDT to purchase this package.`})},y=async e=>{try{0!=e.remainWatchTime?(await d.Z.get(o.Z.GetAdsVideos),k(!0),setTimeout(async()=>{await d.Z.patch(o.Z.UpdateRemainWatchTimesAndBalance+a.id,{packageId:e.packageId,remainWatchTime:e.remainWatchTime}),k(!1),h({isShow:!0,message:"100 BDT has been added to your account",bgColor:"blue"})},3e4)):h({isShow:!0,message:"Caught up",bgColor:"blue"})}catch(e){console.log(e)}};return null!=e&&null!=b?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.Z,{isShow:g.isShow,message:g.message,bgColor:g.bgColor}),r.jsx(n.M,{children:x&&(0,r.jsxs)(l.E.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(30px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.5},className:"fixed w-full h-full top-0 bg-black/10 z-50",children:[r.jsx("h1",{className:"text-center text-xl mt-2",children:"Viewing Ad..."}),(0,r.jsxs)("video",{className:"h-[90%] w-[90%] rounded-lg absolute left-[5%] top-[5%] ",controls:!0,children:[r.jsx("source",{src:"/uploads/Ads/1728020246186-329641620.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]})}),(0,r.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl w-[90%] relative left-[5%] mt-4 rounded",children:[r.jsx("h1",{className:"text-3xl text-center border-b dark:border-white/20 border-black/30 pb-1.5 mb-2",children:"My Packages"}),0==b.length?r.jsx(r.Fragment,{children:r.jsx("h1",{className:"text-center p-4",children:"Currently You do not have any active packages"})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:" grid md:grid-cols-3 grid-cols-1 rounded ",children:b.map(e=>(0,r.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl dark:shadow-gray-700/10 text-center m-2 rounded overflow-hidden",children:[r.jsx("h1",{className:"border-b border-white/20 text-xl pb-1",children:e.packageTitle}),(0,r.jsxs)("p",{className:"my-4",children:["Package Status: ",e.packageStatus," ",r.jsx("br",{}),"Days Remaining: ",e.remainActive," ",r.jsx("br",{}),"Ads Remaining: ",e.remainWatchTime]}),r.jsx("button",{type:"button",onClick:()=>y(e),className:"border-t dark:border-white/20 border-black/30 w-[100%] h-10 mt-2 text-lg font-semibold duration-300 hover:bg-indigo-700 hover:text-white",children:"Watch Ad"})]},e.packageId))})})]}),(0,r.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl w-[90%] relative left-[5%] mt-4 rounded",children:[r.jsx("h1",{className:"text-3xl text-center border-b dark:border-white/20 border-black/30 pb-1.5 mb-2",children:"All Packages"}),r.jsx("div",{className:" grid md:grid-cols-3 grid-cols-1 rounded ",children:e.map(e=>(0,r.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl dark:shadow-gray-700/10 text-center m-2 rounded overflow-hidden",children:[r.jsx("h1",{className:"border-b border-white/20 text-xl pb-1",children:e.title}),(0,r.jsxs)("p",{className:"my-4",children:["Duration: ",e.duration," ",r.jsx("br",{}),e.description," ",r.jsx("br",{}),e.price+" BDT Only"," ",r.jsx("br",{}),"100 BDT per Ad"]}),r.jsx("button",{type:"button",onClick:()=>w(e),className:"border-t dark:border-white/20 border-black/30 w-[100%] h-10 mt-2 text-lg font-semibold duration-300 hover:bg-indigo-700 hover:text-white",children:"Buy Now"})]},e.packagesId))})]})]}):r.jsx(s.Z,{isLoading:!0,message:"Loading Packages..."})}},3822:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o,metadata:()=>i});var r=a(9510);let s=(0,a(8570).createProxy)(String.raw`D:\node test\frontend-nextjs\src\app\pages\dashboard\user\packages\packages.tsx#default`),i={title:"Packages"},o=()=>r.jsx(s,{})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,500,621,323,99,226,264],()=>a(9674));module.exports=r})();