(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{7489:function(e,t,a){Promise.resolve().then(a.bind(a,369))},8360:function(e,t,a){"use strict";var s=a(7437),r=a(4446),o=a(5729);t.Z=e=>{let{isLoading:t,message:a}=e;return(0,s.jsx)(r.M,{children:t&&(0,s.jsx)(o.E.div,{className:"fixed top-0 left-0 h-[calc(100%)] w-[calc(100%)] z-50 backdrop-brightness-75 content-center grid justify-items-center",initial:{opacity:0,backdropFilter:"blur(0)"},animate:{opacity:1,backdropFilter:"blur(50px)"},exit:{opacity:0,backdropFilter:"blur(0)"},children:(0,s.jsxs)(o.E.div,{className:"p-4 w-fit min-w-[200px] h-fit bg-white/10 rounded-lg outline outline-2 outline-white/20",initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.3},children:[(0,s.jsx)(o.E.svg,{height:"100px",width:"100px",className:" rounded-full animate-svgSpin relative mb-1 left-[calc(50%-50px)]",initial:{opacity:0,y:-500},animate:{opacity:1,y:0},exit:{opacity:0,y:500},transition:{duration:.5},children:(0,s.jsx)("circle",{cx:"50px",cy:"50px",r:"30",fill:"none",strokeLinecap:"round",stroke:"blue",strokeWidth:"5",style:{strokeDasharray:180},className:"origin-center animate-dash"})}),(0,s.jsx)(o.E.p,{className:"text-lg text-gray-400/90 text-center w-full font-medium ",children:a})]})})})}},7523:function(e,t,a){"use strict";var s=a(7437),r=a(4446),o=a(5729);t.Z=e=>{let{isShow:t,message:a,bgColor:i}=e;return(0,s.jsx)(r.M,{children:t&&(0,s.jsx)(o.E.div,{className:"border border-white/30 rounded fixed top-16 md:left-[25%] left-[5%] h-[calc(7%)] md:w-[calc(50%)] w-[90%] z-50 content-center grid justify-items-center backdrop-blur-xl ".concat("red"==i?"bg-rose-700/50":"bg-blue-700/50"),initial:{opacity:0,y:-300},animate:{opacity:1,y:0},exit:{opacity:0,y:-100},transition:{duration:1},children:(0,s.jsx)("p",{className:"md:text-lg text-sm mx-2 font-semibold",children:a})})})}},369:function(e,t,a){"use strict";var s=a(7437),r=a(8360),o=a(7523),i=a(1472),l=a(8472),c=a(4446),d=a(5729),n=a(6463),h=a(2265);t.default=()=>{(0,n.useRouter)();let[e,t]=(0,h.useState)(null),[a,p]=(0,h.useState)(null),[u,g]=(0,h.useState)({isShow:!1,message:"",bgColor:""}),[b,m]=(0,h.useState)(null),[x,w]=(0,h.useState)(!1);(0,h.useEffect)(()=>{(async()=>{if(null!=sessionStorage.getItem("loginId")){let e=await l.Z.get(i.Z.GetDataById+sessionStorage.getItem("loginId"));return p(e.data),e.data}})()},[]),(0,h.useEffect)(()=>{(async()=>{t((await l.Z.get(i.Z.GetAllPackages)).data)})()},[]),(0,h.useEffect)(()=>{(async()=>{m((await l.Z.get(i.Z.GetActivatedPackagesByUserId+sessionStorage.getItem("loginId"))).data)})()},[]),(0,h.useEffect)(()=>{let e=setTimeout(()=>{g({isShow:!1,bgColor:"",message:""})},5e3);return()=>clearInterval(e)},[u.isShow]);let k=async e=>{if((null==a?void 0:a.balance)>=e.price)try{let t=await l.Z.post(i.Z.CreateActivity,{userId:a.id,packageId:e.packagesId,packageTitle:e.title,packageStatus:"active",remainActive:parseInt(e.duration),remainWatchTime:parseFloat(e.description)});!0!=t.data?g({bgColor:"red",isShow:!0,message:t.data}):(await l.Z.post("".concat(i.Z.BuyPackage),{userId:sessionStorage.getItem("loginId"),packageId:e.packagesId,packagePrice:e.price}),p(t=>({...t,balance:t.balance-e.price})),g({bgColor:"blue",isShow:!0,message:"Success! You've purchased the package. Your new balance is ".concat(a.balance-e.price," BDT.")}))}catch(e){console.error(e),g({bgColor:"red",isShow:!0,message:"Error purchasing the package. Please try again."})}else g({bgColor:"red",isShow:!0,message:"You need more ".concat(parseFloat(e.price)-parseFloat(a.balance)," BDT to purchase this package.")})},y=async e=>{try{0!=e.remainWatchTime?(await l.Z.get(i.Z.GetAdsVideos),w(!0),setTimeout(async()=>{await l.Z.patch(i.Z.UpdateRemainWatchTimesAndBalance+a.id,{packageId:e.packageId,remainWatchTime:e.remainWatchTime}),w(!1),g({isShow:!0,message:"100 BDT has been added to your account",bgColor:"blue"})},3e4)):g({isShow:!0,message:"Caught up",bgColor:"blue"})}catch(e){console.log(e)}};return null!=e&&null!=b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{isShow:u.isShow,message:u.message,bgColor:u.bgColor}),(0,s.jsx)(c.M,{children:x&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(30px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.5},className:"fixed w-full h-full top-0 bg-black/10 z-50",children:[(0,s.jsx)("h1",{className:"text-center text-xl mt-2",children:"Viewing Ad..."}),(0,s.jsxs)("video",{className:"h-[90%] w-[90%] rounded-lg absolute left-[5%] top-[5%] ",controls:!0,children:[(0,s.jsx)("source",{src:"/uploads/Ads/1728020246186-329641620.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})]})}),(0,s.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl w-[90%] relative left-[5%] mt-4 rounded",children:[(0,s.jsx)("h1",{className:"text-3xl text-center border-b dark:border-white/20 border-black/30 pb-1.5 mb-2",children:"My Packages"}),0==b.length?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("h1",{className:"text-center p-4",children:"Currently You do not have any active packages"})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:" grid md:grid-cols-3 grid-cols-1 rounded ",children:b.map(e=>(0,s.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl dark:shadow-gray-700/10 text-center m-2 rounded overflow-hidden",children:[(0,s.jsx)("h1",{className:"border-b border-white/20 text-xl pb-1",children:e.packageTitle}),(0,s.jsxs)("p",{className:"my-4",children:["Package Status: ",e.packageStatus," ",(0,s.jsx)("br",{}),"Days Remaining: ",e.remainActive," ",(0,s.jsx)("br",{}),"Ads Remaining: ",e.remainWatchTime]}),(0,s.jsx)("button",{type:"button",onClick:()=>y(e),className:"border-t dark:border-white/20 border-black/30 w-[100%] h-10 mt-2 text-lg font-semibold duration-300 hover:bg-indigo-700 hover:text-white",children:"Watch Ad"})]},e.packageId))})})]}),(0,s.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl w-[90%] relative left-[5%] mt-4 rounded",children:[(0,s.jsx)("h1",{className:"text-3xl text-center border-b dark:border-white/20 border-black/30 pb-1.5 mb-2",children:"All Packages"}),(0,s.jsx)("div",{className:" grid md:grid-cols-3 grid-cols-1 rounded ",children:e.map(e=>(0,s.jsxs)("div",{className:"border dark:border-white/20 border-black/30 shadow-xl dark:shadow-gray-700/10 text-center m-2 rounded overflow-hidden",children:[(0,s.jsx)("h1",{className:"border-b border-white/20 text-xl pb-1",children:e.title}),(0,s.jsxs)("p",{className:"my-4",children:["Duration: ",e.duration," ",(0,s.jsx)("br",{}),e.description," ",(0,s.jsx)("br",{}),e.price+" BDT Only"," ",(0,s.jsx)("br",{}),"100 BDT per Ad"]}),(0,s.jsx)("button",{type:"button",onClick:()=>k(e),className:"border-t dark:border-white/20 border-black/30 w-[100%] h-10 mt-2 text-lg font-semibold duration-300 hover:bg-indigo-700 hover:text-white",children:"Buy Now"})]},e.packagesId))})]})]}):(0,s.jsx)(r.Z,{isLoading:!0,message:"Loading Packages..."})}},1472:function(e,t){"use strict";t.Z={IsEmailExist:"http://localhost:3333/user/isEmailExist/",Register:"http://localhost:3333/user/register",LoginAuth:"http://localhost:3333/user/loginAuth",GetAllUsers:"http://localhost:3333/user/getAllUsers",GetDataById:"http://localhost:3333/user/getDataById/",CreatePackage:"http://localhost:3333/packages/createPackage",GetAllPackages:"http://localhost:3333/packages",BuyPackage:"http://localhost:3333/packages/buy",CreateDepositRequest:"http://localhost:3333/depodraw",CreateWithdrawRequest:"http://localhost:3333/depodraw",GetAllDepositRequests:"http://localhost:3333/depodraw/deposits",GetAllWithdrawRequests:"http://localhost:3333/depodraw/withdrawals/",UpdateRequestStatus:"http://localhost:3333/depodraw/status/",CreateActivity:"http://localhost:3333/activity/createActivity",GetActivatedPackagesByUserId:"http://localhost:3333/activity/getActivatedPackagesByUserId/",UpdateRemainWatchTimesAndBalance:"http://localhost:3333/activity/updateRWTandBalance/",ChangePassword:"http://localhost:3333/user/changePassword/",PostDepodrawRequest:"http://localhost:3333/depodraw/depo",GetAllDepositRequest:"http://localhost:3333/depodraw/getAllDepoReq",PatchDepoStatus:"http://localhost:3333/depodraw/updateStatus/",PatchUserBalance:"http://localhost:3333/user/updateDepoBalance/",UploadAd:"http://localhost:3333/ads/upload",GetAdsVideos:"http://localhost:3333/ads",GetAdById:"http://localhost:3333/ads/:id",DeleteAd:"http://localhost:3333/ads/:id"}}},function(e){e.O(0,[446,472,971,23,744],function(){return e(e.s=7489)}),_N_E=e.O()}]);